<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Codenem</title>
</head>
<body>  
  <div class="app"></div>

  <div class="credits">
    <h1 class="credits__title">shaolin405</h1>
    <p class="credits__wrapper">
      <a href="https://twitter.com/avanderpotte" target="_blank" class="credits__link">avanderpotte</a> â˜“ <a href="https://twitter.com/leixng" target="_blank" class="credits__link">leixng</a>
    </p>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/87/three.min.js"></script>
  <script src="https://threejs.org/examples/js/controls/TrackballControls.js"></script>
  <script type="x-shader/vertex-shader" id="orangeVertex">
    #define PI 3.1416
    float angle = -PI;
    float radius = 10.;
    vec3 shape( vec2 uv, float t ) {
      vec3 newShape;
      newShape.x = radius * sin( 10. * uv.x ) * ( 0.9 + cos( 1.5 * uv.y ) );
      newShape.y = radius * sin( 10. * uv.x + ( PI * 0.3 ) / 9. ) * ( 1. + cos( 0.25 + 0.5+pow(1.+(sin(t)),2.) * uv.y + ( PI * 2. ) / 3. ) );
      newShape.z = 1.5*radius * sin( 10. * uv.x + ( PI * 9. ) / 9. ) * ( 1. + cos( 0.35 * uv.y + ( PI * 4. ) / 3. ) );
      return newShape;
    }
    uniform float uTime;
    varying vec3 vNormal;
    varying vec2 vUv;
    varying vec3 vViewPos;
    void main() {
      vNormal = normal;
      vUv = uv;
      vec3 f = shape( position.xy, uTime );
      vec4 pos = vec4(f, 1.0);
      vec4 mpos = modelViewMatrix * pos;
      gl_Position = projectionMatrix * mpos;
      vViewPos = -mpos.xyz;
    }
  </script>
  <script type="x-shader/fragment-shader" id="orangeFragment">
    vec3 faceNormal(vec3 pos) {
      vec3 fdx = dFdx(pos);
      vec3 fdy = dFdy(pos);
      return normalize(cross(fdx, fdy));
    }
    uniform vec3 uColor;
    uniform vec3 uColor2;
    varying vec3 vViewPos;
    varying vec3 vNormal;
    varying vec2 vUv;
    void main() {
      vec3 normal = vNormal;
      normal = faceNormal(vViewPos);
      float diffuse = normal.y * 0.5 + 1.;
      vec3 color = mix( uColor, uColor2, cos(5.*vUv.x-vNormal.y));
      color *= diffuse;
      gl_FragColor = vec4( color, 1.0 );
    }
  </script>
  <script src="app.bundle.js"></script>
</body>
</html>